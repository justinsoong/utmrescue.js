!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.UtmRescue=e():t.UtmRescue=e()}(this,(()=>(()=>{"use strict";var t={};return{156:function(t,e){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.utmParams={},this.extractUtmParams(),this.storeUtmParams()}return t.prototype.extractUtmParams=function(){var e=this,r=new URLSearchParams(window.location.search.toLowerCase()),o=this.getStoredUtmParams();t.UTM_KEYS.forEach((function(t){var a=r.get(t);a&&!o[t]?e.utmParams[t]=a.toLowerCase():o[t]&&(e.utmParams[t]=o[t])}))},t.prototype.storeUtmParams=function(){var e=this.getStoredUtmParams(),o=r(r({},e),this.utmParams);if(Object.keys(o).length>0){var a=JSON.stringify(o),n=new Date;n.setDate(n.getDate()+t.COOKIE_EXPIRATION_DAYS),document.cookie="".concat(t.COOKIE_NAME,"=").concat(encodeURIComponent(a),"; expires=").concat(n.toUTCString(),"; path=/; domain=").concat(this.getParentDomain(),"; SameSite=Lax")}},t.prototype.getParentDomain=function(){return window.location.hostname.split(".").slice(-2).join(".")},t.prototype.getUtmParams=function(){return r({},this.utmParams)},t.prototype.getStoredUtmParams=function(){for(var e=0,r=document.cookie.split(";");e<r.length;e++){var o=r[e].trim().split("="),a=o[0],n=o[1];if(a===t.COOKIE_NAME)try{return JSON.parse(decodeURIComponent(n))}catch(t){console.error("Error parsing stored UTM parameters:",t)}}return{}},t.COOKIE_NAME="_utmrescue_data",t.COOKIE_EXPIRATION_DAYS=30,t.UTM_KEYS=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],t}();e.default=o}}[156](0,t),t})()));